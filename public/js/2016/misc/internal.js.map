{"version":3,"sources":["internal.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"internal.js","sourcesContent":["$(document).ready(function () {\n\n    //Input Masks For\n    initDollarAndPercentInputMasks();\n\n    //Section Toggles\n    initDataSectionToggle();\n\n    //.ajax For ajax forms\n    initAjaxForms();\n\n    //Toggle elements based on this elements state\n    initDataDisableToggle();\n\n    //Advanced Discounts\n    $('input[id*=advanced-discounts]')\n        .change(useAdvancedDiscountOptions);\n\n    $('select[id*=carrier]')\n        .change(updateDiscountLabels);\n\n    //Dynamic dropdowns\n    $('.dynamic-selector').change(updateSelectors);\n});\n\nfunction initDataDisableToggle() {\n    $('[data-disable-toggle]').change(function () {\n        //Can pipe multiple dependencies\n        var val = $(this).attr('data-disable-toggle');\n        var inputs = val.indexOf('|') != -1 ? val.split('|') : [val];\n        //Make sure we have a blank input\n        if ($(this).val() != null && $(this).val() != 'undefined' && $(this).val() != '' && $(this).val() != 0) {\n            for (var i in inputs) {\n                $(inputs[i]).attr('disabled', false);\n            }\n        } else {\n            for (var i in inputs) {\n                $(inputs[i]).attr('disabled', true);\n            }\n        }\n    });\n}\n\n//If we have .dollars or .percentage it will init input masks\nfunction initDollarAndPercentInputMasks() {\n    if($('.dollars').length > 0 || $('.percentage').length > 0) {\n        $('.dollars').inputmask('Regex', {regex: \"^[0-9]*\\\\.[0-9]{1,2}\", rightAlign: true});\n        $('.percentage').inputmask({mask: \"9{1,2}[\\\\.9{1,2}]\", greedy: false, placeholder: \"\", rightAlign: true});\n    }\n}\n\n//Allows us to slidetoggle a section based on the change of input\nfunction initDataSectionToggle() {\n    $('[data-section-toggle]').change(function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        var toggleElement = $(this).attr('data-section-toggle');\n        $(toggleElement).slideToggle();\n    });\n}\n\n//double check for required on top of browser reqs\nfunction verifyRequiredFields(form) {\n    var fieldsAreValid = true;\n    $.each(form.find('[required]'), function () {\n        var val = $(this).val();\n        if (fieldsAreValid == true) {\n            if (val == '' || val == null || val == 'undefined' || val == 0) {\n                fieldsAreValid = false;\n            }\n        }\n    });\n    return fieldsAreValid;\n}\n\n// Allows us to add .ajax to a form and update html area with data-success-html tag\n// Can scroll if data-scroll-target is added\nfunction initAjaxForms() {\n    $('form.ajax').submit(function (e) {\n        e.preventDefault();\n        //See if we have all fields that are required\n        var post = verifyRequiredFields($(this));\n        //See if we are scrolling anywhere\n        if (typeof $(this).attr('data-scroll-target') != null) {\n            if (post) {\n                var target = $(this).attr('data-scroll-target');\n                $('html, body').animate({\n                    scrollTop: $(target).offset().top\n                }, 1000);\n            }\n        }\n        //If we have all fields submit\n        if (post) {\n            var url = $(this).attr('action');\n            var successHtml = $(this).attr('data-success-html');\n            $.ajax({\n                method: \"POST\",\n                url: url,\n                data: $(this).serializeArray(),\n                success: function (data) {\n                    $(successHtml).html(data);\n                }\n            });\n        } else {\n            alert('please fill in all required fields');\n        }\n    });\n}\n\n\nfunction updateSelectors(e) {\n    var target = $(this).attr('data-target');\n    var parent = $(this).attr('data-parent');\n    var dir = '/files/';\n    var file;\n\n    //Make sure we actually have a value\n    if ($(this).val() != 0 && $(this).val() != \"\" && $(this).val() != null) {\n\n        if (typeof parent != 'undefined') {\n            //If we have a parent it will show us the directory\n            file = dir + $(parent).val() + '/' + $(this).val() + '.txt';\n        } else {\n            //If we dont have a parent we are the parent and will show directory\n            file = dir + $(this).val() + '/' + $(target).attr('data-load');\n        }\n\n        $(target).load(file, function(){\n            $(target).trigger('change');\n        }).attr('disabled', false);\n\n    } else {\n        //Remove Options\n        $(target).attr('disabled', true).children().remove();\n        //Trigger another change in case we have grandchildren\n        $(target).trigger('change');\n    }\n}\n\nfunction useAdvancedDiscountOptions() {\n    var input = $('#' + $(this).attr('id').replace('advanced-discounts', 'general'));\n    var label = $(\"label[for=\" + input.attr('id') + \"]\");\n    var inputAddon = input.next('.input-group-addon');\n    var formGroup = input.closest('.form-group');\n\n    label.animate({height: 'toggle'});\n    inputAddon.animate({'height': 'toggle'});\n    input.animate({height: 'toggle'});\n\n\n    if ($(this).prop(\"checked\")) {\n        formGroup.addClass('form-group-tab');\n    } else {\n        formGroup.removeClass('form-group-tab');\n    }\n}\n\n//Change Discount Label\nfunction updateDiscountLabels() {\n\n    $.each($('[id*=discount-label]'), function () {\n        var prefix = '#' + $(this).attr('id').replace('discount-label', '');\n        var carrier = $(prefix + 'carrier option:selected').text();\n        var year = $(prefix + 'year option:selected').text().indexOf('-') > -1 ? $(prefix + 'year option:selected').text() : $(prefix + 'year option:selected').text() + ' - ';\n        var type = $(prefix + 'type option:selected').text();\n        var discountName = carrier == 'UPS' ? ' Tier Incentive' : ' Earned Discount';\n        $(this).text(carrier + ' ' + year + ' ' + type + discountName);\n        $('#' + $(this).attr('id').replace('discount', 'weight-break')).text(carrier + ' ' + type);\n    });\n}\n"],"sourceRoot":"/source/"}